grammar Formula

  rule parens
    (op? '(' operation ')' parens / operation) <FormulaNode>
  end

  rule operation
    (value op operation / value)
  end

  rule value
    (code / float / integer)
  end

  rule op
    ('+' / '-' / '*' / '/')
  end

  rule code
    '<code>' get_code '</code>'
  end

  rule get_code
    [a-zA-Z0-9\-\_\.]*
  end

  rule float
    integer '.' [0-9]+
  end

  rule integer
    '-'? unsigned_integer
  end

  rule unsigned_integer
    ('0' / [0-9]*)
  end
end
